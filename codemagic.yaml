# Automatically generated on 2021-08-22 UTC from https://codemagic.io/app/6120d6700f40c2bca781037b/settings
# Note that this configuration is not an exact match to UI settings. Review and adjust as necessary.

workflows:
  default-workflow:
    name: Default Workflow
    max_build_duration: 60
    environment:
      vars:
        FCI_KEYSTORE_PATH: /tmp/keystore.keystore
        FCI_KEYSTORE: Encrypted(Z0FBQUFBQmhJaURDaG1STHBONS1MWFVJU0p3WWx2S0t5TmlpdFYyUm03bEkzRlNfWENBejIxMGtja00tTjRHRERoTkl0NmhjZkVZbWtXV0QzZjdvQWtlVmNmQXhYMi16bEo3WXlqdjBGZDJjQVpicjA2c1ZGODRWcVFrUU1jalNCOHhzaVZsMlZBaXh4cVpZQWdpUGdhMWtyMGx2RWpyOGJhWmpMNTN6bUJCUEpEYUQzOGRtaXdJTnVzdllBTXkxTEdwNHFwZFFmNnI4NHBILXphbFptZ01rSmlkLUtvc05BQ3BvWEVIWjJ0TjlEMnBGMXkyT0xQVHgxREJ1S0tqRjNLRGs1LWhWUlB2bjBRaFNyTWctTWhvMXBUU1lvcTROdFFKaGdrcTRGdWdBU2dhblB4amxaMWgzdmEyTVU2OUZ6U1IxbnJ5eGpRdnJ3d3M2a0VuY0tFVVZ1RmVnQ2JvSldvTUNXTnpWcW5RSUNLRHNlQ2dLY05oaDZ1dU55NkVhYlZfak1sOGE2QUlZYm1tQWdYUXdHbXEyMXJXMUlHdzd2bURYLW1wZVFBWG9pSDZlTU1Jczh0emZlRVpFelhOcTYxLUk5YnB1REJGazl2bkpIRVZfdFZBVzZ1QU1tYWhBRE5waGotWm82ZWNpc0hfNTZxbDBiaFZwSkR2MXFuS1VqZnM2ZjFlN2tNbW5kOHdtbTdudnppOTFyWlJKUS1UMDVoVGs1Ukl3VWhjckt4QXlMbUtWOS1pZ2RINmoxZkRoSnA0emJDcDI1S0s4bzZKdjdfNy12OWRRU3RnN09hMTRKWUJpZGdCdnYtOGtNMFhvZGZlejdvNVV4VUJSU0FDbllvbUhmYVd0dF95NmVKWmdIbWtKanAxQnhheDN0QkZrdFZyUlA5ek4yeHBqaU1ZTndRNVl1aGt6ZlV0Q2c0aFVXRDR2NkdSMWhvaXB6TmdxZks4Z1JGMXNPX012NThjaUptM2ZtT2ZuZ2Zuc3ZoT2JZMXFDT05HWmhJQUdQelFEcm5oUFdCY1dVRi1BeF95Zm1OWmtBd1NGZ1hLR3h1dXU1aUEzcm5yMkVmSHVCYUQzMjB5b2pyaHl6ODRTcTNFTUhKZjFodER2MGl3Y0VUQlJEQlBQN0Raa3hsNXUxTzJ2SFJzeTNDZU9JQXB3ZWcxb0g2V2pFX05jS0pvR3pyTTNqN19VY1pBSFVEVkR3bFRSWDRDR2E1SnBuUkw2YXhMdUJhdjRBYjlNWHNrV3pPLWxPZFd5eFVmN0FsQVJxN0tKeEdXQlNadUVtbTdVM0xTZHlRRWwzQi1QM3BFWlp5S0FHa2xfVjRoclVPT2h5RGZLVk9vRWdzZzR3aHUxZzBxd3owTzFRSmYzSEppczhYVG9VNjhNb2FqSkJJUzFKTUFRRm10eVRUdk5iNVRtd3NLdTZlUmZQN1VRTEIydkhlMG5LYnVxdnhlQ0V1RENZQmNaMk04SXBzY0xNaWFjcnFQSk1yVllsX2Y4cTF3aU1qdmJ0ZFZRQm9JemRWYTliQjQ3eVdPd1c5VXBEamhKTzBCbklfWFdWa0xMazdfYmVYLW43VGhoTnhONTZXbDFid3V1QzR6blBjU1VvMEJSbXowUFVST3NuUndnUUdYT2F6U3hDYWF5bE9TTWFWUF9JdXhRcnU4a0ZjdkUxMFJBaGR4bjczS3p2ZFduVXNKU295aTRVXzVseTd3Qzhack55UzNjQVFMWHdkWXlxdE9aSXRqSEtrdE9qNlEwTTgzTjdIclZ0MDlMQUxkYmRjZVhyeVBVYmowSmROcGFkM25BbUtrV0xreVJNalJRYk5qUjdnTnRKYk5hamdWX3ZQalI0R0FQd2o4OFQyUVVoYWVMZ3hhZmlNYjYydGIxMnlWTFhWXzBsLWNUd0pkYWdlbFZlR1pKZnZxT3pGWlZtbUpyMjVpR2NBeXcxaC04ZkdCQjA2Ylh2RjZZemlfeFlXRllGMVZHZWhJdEpWSVY2Z3pBV3B6NGJLWkRRMEpxZWlkVTFjbzFqTzRhSHhPUF9KdDd6Z1BZc0pPd3hia3o2U0llVnpPY05JY1A4ZjNGRUZxQW9oMXdkcWxnLXZKTlczNU41dTZpaGwzLXN6b0lQS3otYWs4QVlYajFIQVNvbkIzQ1l2OUhJODZYdXhPWFZ2TkJLWHplQkZwalVBTHp3LXQ5LUpqNG1aeWZEajNXWS1NWTk5RzJrQUlWQk53aDJRNkgwS2doVkJmcV9zZDgtQ0ZkeW9oT0NhdVVqMDdWcEVPWTBqblZBZGhvLXEtTDlzUUlscnlQZm5hbEtheURFYTNQRGYtcVR3Z0N0eThGTmZHNHBCd1JQNFVlbVVLMGhpaUROMUFWLURaX2FvRU1iSFl6aWNaYm9CU1JSaUFIbHZFZlBEMHI2YVBybHVjZkxxdVA3cTUxZkIzYjJVNXdEMUtsSVVxSFktY0dRRTRaQS1lTzZPZTRpMnBETTNKSGFDVzFBNEFuejhIcC03c0VFd3ZhcGVCMTlmRzN3RV9mRmlfUDE0ZEtTYnB3WVdRU1R5bWVmWnA4T1BSaldvemtDNXlEYTR6SWNSTHdFV3RNb1VMLTRPVy1NaWhmWjlQVmQzLVgyLUZQRmVhQ3diSXUzWVU4T3BuLWZPdmhIbTJoSmNTcE5lWW91Vy0zRFpLNEdCV2NPYlZKc3lRREJhQVNVdFlaeHlUTHl1cF9Kd0pQMXN1QVlfa21qNmt2Y3JYa0h5MmxGNXVKanBPQ2JSMTJEYk5UejBrQ0lJa1czMi1SMTlxN2cyZ0Jqd3BEbGFLWUdDMlFaeHNRYkVaQ25oQlA0UkJoWmtkbFdWMWNDamhVRV9LeHc4QUtZYmtQc0twQVp0WnVBb0djdXZYRzI5cVNrRGJ3RHk1S1ZmeVdibllrM2tuQ191dGRtY0xCR2JJSjV0YjJrMDVpVXl5X1ZodE1TQmlRa0pfNFdCNDRDd3k3RTZoeF9PVjk5YVZmYWlzRWR5bE5nZG92T2tNWUt2TTJtMnpqblRHcXBicmtHbE1YR29zaVpuQ29qVG1idDRla2tSYkc4dEhfMVE2RmFpQXlGZlJjTTRRNDNuN1lVTGZTOXk5VDhnMFJOTDczM3FNX24xeEhZQ1FjSU4xVFFKZXhReGhTYmRiOWU3bDVYWVJQS2JVWDNMYmdLbUxDNVcyNmhUWUNiODBNWTdmMVpTMmpWODI5b3RCMEJqSk5wck1GVmlHdzlqOU5WZWtNLXdyWVg0WG1qTU5SQjlCY2Q1SG1xdlFaSndIWkFLZ1R2VVBBRUt2T3pMRXl5WmhieVRISEJlTDZtcUZKNmNhQ3NfdzlaVVdDS01id1JGVE5wampacUMzT2s2R2ZFQS1mTkk0MHZLSVd4YWtlU2FBa0d3LUZfSEl4OFU3dmR4TnFHUmd1ZU1BVzJnS3BjY19pampwbTQ2QTFJUEFpcHFIblY2cEtHWmtkcVlVT19uYno4YXkxRFM0dGdISEd1VVQxVUE1TUlRbm04bmhzZG5kbVNoVDdTWlNzcVdTbkF5UmxhOElpOGItYnFzalEyWFZSanVaV0FfQ0YyMExmZjVZNFVoVnhLT1BrZ0tvdWEzd09LbjdJNFd6TjAwSEYtV1VseGUtZHZ6V01vTVVfd08yT2hrSWJuVHFLNmhBTFBxQjB2bTFzek9QYy1VdFJwSG1hNGttdGt5UThHUDJuZzAwVVhKNEwyYTF4TzRWY1B3TW1RZHN1NExFZ3YwUUp0a2xPUW1ndkFTOVVlZk14cUg4RHQ1SjBqM0lkdHJaQWR5MGRKNUtwMHNNZFczZFZnVnNPdDg1a21oOEdmZmJrTXZYSDNVNjllYUVlWldzaGRTZ095RVRET05UVkJSOWVmZ2ZWVTNwdzNxaHlSZDJYVHR5MUFPWE03RmtMMVdteWdxZXFOcnAyVXVpQ0kxa1lYSDBldnFUYzE5ano2b0lQbDhTSlFMT2RpaXZHRTNRY1BkMC10MTB4WGtib2RFLUswVnVrTkxIdXgtY01mb2RReS05WThVQU1lSWVjRjhhUUprWHJhY2RUREpwYjFuTWpLaUtUem5RUjFZLVl6UEM3cTBwVUJPcmhoRV9BNnZ5YVh0MURLVXN3MjZvN2pLdXFzMkM3SWlvZ1FGdk9ZWEpvR1Y3d1hmMHktVDJFQ3JSd2dKTklMWVFsOUVORHpQTzZ5Y3BkRGJ5UGF5VXZ4Qk9RRG93c3dERGp5U2V1WUZCWE5oVmRFQlhvVjR2a29RMHhzZXVwb2g0VTkyUDBVVERfZU1FVjFaLURCdmM3alhCWmlEbFBWeGgyV3FoV0lNM1RRSkVwbEF2aGJRZUFKc0ZhUThLSldsTlN2ZW5fNkhQTkd3Q1EtMUxESjR2dUVXUDZFMTVlOWxDa0FWdnl4MGJISDF0NjFkckduTmV3SDF0ZFZveUZ3LUJ6Z1FIb0hKamI3Sm1RbEFuYnhuSUhWeWFjeEVZa21WZmRlaW9MNm5CZmlFWnlDM1JGSzhUV2VrNy1seUpidGVfQXJZWlFoamFDS0gyTFlMNzR2R3BsWlgteWt2Mi1LSmNQUXJmUkRsZ29BNVpfZjduSkstYWNJVlliYTJxY1BKMTQ1LUhyeXBvalJiZVZWY3I3R1ZzaHNGLTkyUDhYdXJmZC04YWNzOG5QclVKbldXMlhqQk5LY2YtUFZjQXhFa3p5RzVYUmhSZ25zRzliNHBDSVdVYTQwZ3hPT3lKcGdEVnNaNmNBWXdlalhFaHBwdHRKLWVYM1lPMnBiRjRiZm02Tmh0eFY3b3YzYTMxTXZLZ3lhMHZMbXBjUUxUWVdiLTN6NFBjUkVwOW54UW0zelk1M21ITFB1Uy16SktkdFBFR29peXlraWNSWVZrTXFmQ0hkZThpd2xZUkExcm44d0NTOE1YOFdGMS1EWGY3RE96OW5JbXVTbEg2blBhUWpfaVFIVEtENFlxZVN3S19ObkNTVlV6c0c4MFdMY1J1RTRuT2dJSFpFUTZRdFVMTjNnYkw1X3VMY2ViNEhYaVZmd1hYRVZFbHd0ME5yX3phZEpRdGRKZEprZ3JEOHhyM2NEalFyMU1VZ1NEVmFiM3ZGNE9JTEhvVGhzSm1VSGJOOWpjLUwzazIzN245TVlpZzNLTHRSRkNCY0pfaHBYcnhmeXlkVTZ4ZjlwVTVnTUhLWng1SDNxMDRaS0VIZXNLaGFPX1FsLXprcTZGSHdOSGZVOFZ0ZV93d3ljX2l1R2RJSjdudFpXQ2p0bDkxLUZzX1RwQ0ZxRkllOGpaZFVCTG9WT083M0pNTFpFLS1FQlMxcnJkWUZZMy1tME5uYmJKU2RWNHpZNTFBbGEtMk9Lc0xTbnBvYzloWEV2b3FRUndqcWkyNkNYQVI0UDd1Zm1QX3A3MXFydzZfUlRnVXZxMUwtenhxS29DakZ4aE5PQjBOWnFLNHRhVEpQQ0lKSDZNU1p0Z1RJS0JzZ1R5YnNmU2oweHlLUlNSOVBzTzNvOVE9PQ==)
        FCI_KEYSTORE_PASSWORD: Encrypted(Z0FBQUFBQmhJaURDNVhmMlF0SVE0NW56c0hMRWdvcDJpN183TWJoOTFld0E2ck05WHRjbWtqQ0ZvcnpBVktoNkxWb25TWnZMLVlqOTgwVk95NE11SXNjOXc1Q3JTU2xIb0E9PQ==)
        FCI_KEY_PASSWORD: Encrypted(Z0FBQUFBQmhJaURDU2FNLUNJemRXMXJIM2JiQnZ6TF9nYW5uaE9HTXl3ZjdoVmQtNkk3MUdTck5WM1dwVjRTWEZ6U3Q0N1pYbmREc29OR1ZMczBCTDliOG91Q3hoM090cVE9PQ==)
        FCI_KEY_ALIAS: Encrypted(Z0FBQUFBQmhJaURDSjNqRTV0dDVyRFNGYXdsVzV5a1pRR01mS1dXTVV5aldxdnRWeEk2ZFhzdEEwU0xocldUU2FLZ2N3YXNmX0t1cnEwbGJvejR4V1o4WWR4TFYyU3VISEE9PQ==)
      flutter: stable
      xcode: latest
      cocoapods: default
    scripts:
      - |
        # set up key.properties
        echo $FCI_KEYSTORE | base64 --decode > $FCI_KEYSTORE_PATH
        cat >> "$FCI_BUILD_DIR/android/key.properties" <<EOF
        storePassword=$FCI_KEYSTORE_PASSWORD
        keyPassword=$FCI_KEY_PASSWORD
        keyAlias=$FCI_KEY_ALIAS
        storeFile=/tmp/keystore.keystore
        EOF
      - |
        # set up local properties
        echo "flutter.sdk=$HOME/programs/flutter" > "$FCI_BUILD_DIR/android/local.properties"
      - flutter packages pub get
      - flutter build apk --release
    artifacts:
      - build/**/outputs/apk/**/*.apk
      - build/**/outputs/bundle/**/*.aab
      - build/**/outputs/**/mapping.txt
      - flutter_drive.log
    publishing:
      email:
        recipients:
          - aperekalin@gmail.com
